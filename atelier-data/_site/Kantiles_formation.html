<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Utilisateur">
<meta name="dcterms.date" content="2025-07-21">

<title>Rapport complet : Recensements, Quarto, Scraping, PDF et Zotero – Compte Rendu de Stage</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Compte Rendu de Stage</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Accueil</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./quarto.html"> 
<span class="menu-text">Quarto</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#test" id="toc-test" class="nav-link" data-scroll-target="#test"><span class="header-section-number">2</span> test</a>
  <ul class="collapse">
  <li><a href="#rapport-annuel" id="toc-rapport-annuel" class="nav-link" data-scroll-target="#rapport-annuel"><span class="header-section-number">2.1</span> Rapport annuel</a>
  <ul class="collapse">
  <li><a href="#introduction-1" id="toc-introduction-1" class="nav-link" data-scroll-target="#introduction-1"><span class="header-section-number">2.1.1</span> Introduction</a></li>
  <li><a href="#données" id="toc-données" class="nav-link" data-scroll-target="#données"><span class="header-section-number">2.1.2</span> Données</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#recensements" id="toc-recensements" class="nav-link" data-scroll-target="#recensements"><span class="header-section-number">3</span> Recensements</a>
  <ul class="collapse">
  <li><a href="#description-des-fichiers" id="toc-description-des-fichiers" class="nav-link" data-scroll-target="#description-des-fichiers"><span class="header-section-number">3.1</span> Description des fichiers</a></li>
  <li><a href="#formats-de-diffusion" id="toc-formats-de-diffusion" class="nav-link" data-scroll-target="#formats-de-diffusion"><span class="header-section-number">3.2</span> Formats de diffusion</a></li>
  <li><a href="#outils-pour-manipuler" id="toc-outils-pour-manipuler" class="nav-link" data-scroll-target="#outils-pour-manipuler"><span class="header-section-number">3.3</span> Outils pour manipuler</a></li>
  <li><a href="#import-et-manipulation-en-r" id="toc-import-et-manipulation-en-r" class="nav-link" data-scroll-target="#import-et-manipulation-en-r"><span class="header-section-number">3.4</span> Import et manipulation en R</a></li>
  </ul></li>
  <li><a href="#quarto-et-markdown" id="toc-quarto-et-markdown" class="nav-link" data-scroll-target="#quarto-et-markdown"><span class="header-section-number">4</span> Quarto et Markdown</a>
  <ul class="collapse">
  <li><a href="#vue-générale" id="toc-vue-générale" class="nav-link" data-scroll-target="#vue-générale"><span class="header-section-number">4.1</span> Vue générale</a></li>
  <li><a href="#workflow" id="toc-workflow" class="nav-link" data-scroll-target="#workflow"><span class="header-section-number">4.2</span> Workflow</a></li>
  <li><a href="#comparaison-avec-r-markdown" id="toc-comparaison-avec-r-markdown" class="nav-link" data-scroll-target="#comparaison-avec-r-markdown"><span class="header-section-number">4.3</span> Comparaison avec R Markdown</a></li>
  <li><a href="#création-pdf" id="toc-création-pdf" class="nav-link" data-scroll-target="#création-pdf"><span class="header-section-number">4.4</span> Création PDF</a></li>
  <li><a href="#exemple-de-chunk-r" id="toc-exemple-de-chunk-r" class="nav-link" data-scroll-target="#exemple-de-chunk-r"><span class="header-section-number">4.5</span> Exemple de chunk R</a></li>
  </ul></li>
  <li><a href="#scraping-web-avec-r" id="toc-scraping-web-avec-r" class="nav-link" data-scroll-target="#scraping-web-avec-r"><span class="header-section-number">5</span> Scraping Web avec R</a>
  <ul class="collapse">
  <li><a href="#introduction-2" id="toc-introduction-2" class="nav-link" data-scroll-target="#introduction-2"><span class="header-section-number">5.1</span> Introduction</a></li>
  <li><a href="#pourquoi-faire-du-scraping" id="toc-pourquoi-faire-du-scraping" class="nav-link" data-scroll-target="#pourquoi-faire-du-scraping"><span class="header-section-number">5.2</span> Pourquoi faire du scraping ?</a></li>
  <li><a href="#outils-et-bibliothèques-en-r" id="toc-outils-et-bibliothèques-en-r" class="nav-link" data-scroll-target="#outils-et-bibliothèques-en-r"><span class="header-section-number">5.3</span> Outils et bibliothèques en R</a></li>
  <li><a href="#bonnes-pratiques-avant-de-commencer" id="toc-bonnes-pratiques-avant-de-commencer" class="nav-link" data-scroll-target="#bonnes-pratiques-avant-de-commencer"><span class="header-section-number">5.4</span> Bonnes pratiques avant de commencer</a></li>
  <li><a href="#exemple-complet-récupération-et-scraping-de-fiches-sur-cheese.com" id="toc-exemple-complet-récupération-et-scraping-de-fiches-sur-cheese.com" class="nav-link" data-scroll-target="#exemple-complet-récupération-et-scraping-de-fiches-sur-cheese.com"><span class="header-section-number">5.5</span> Exemple complet : récupération et scraping de fiches sur cheese.com</a>
  <ul class="collapse">
  <li><a href="#étape-1-récupération-des-urls-via-sitemap" id="toc-étape-1-récupération-des-urls-via-sitemap" class="nav-link" data-scroll-target="#étape-1-récupération-des-urls-via-sitemap"><span class="header-section-number">5.5.1</span> Étape 1 : récupération des URLs via sitemap</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#lecture-de-pdf-en-r" id="toc-lecture-de-pdf-en-r" class="nav-link" data-scroll-target="#lecture-de-pdf-en-r"><span class="header-section-number">6</span> Lecture de PDF en R</a>
  <ul class="collapse">
  <li><a href="#outils" id="toc-outils" class="nav-link" data-scroll-target="#outils"><span class="header-section-number">6.1</span> Outils</a></li>
  <li><a href="#usages" id="toc-usages" class="nav-link" data-scroll-target="#usages"><span class="header-section-number">6.2</span> Usages</a></li>
  <li><a href="#cas-pratique" id="toc-cas-pratique" class="nav-link" data-scroll-target="#cas-pratique"><span class="header-section-number">6.3</span> Cas pratique</a></li>
  </ul></li>
  <li><a href="#zotero-gestion-documentaire" id="toc-zotero-gestion-documentaire" class="nav-link" data-scroll-target="#zotero-gestion-documentaire"><span class="header-section-number">7</span> Zotero : gestion documentaire</a>
  <ul class="collapse">
  <li><a href="#module-zotero-veille-documentaire" id="toc-module-zotero-veille-documentaire" class="nav-link" data-scroll-target="#module-zotero-veille-documentaire"><span class="header-section-number">7.1</span> Module : Zotero &amp; Veille documentaire</a></li>
  <li><a href="#présentation-générale-de-zotero" id="toc-présentation-générale-de-zotero" class="nav-link" data-scroll-target="#présentation-générale-de-zotero"><span class="header-section-number">7.2</span> Présentation générale de Zotero</a></li>
  <li><a href="#fonctionnement-de-base" id="toc-fonctionnement-de-base" class="nav-link" data-scroll-target="#fonctionnement-de-base"><span class="header-section-number">7.3</span> Fonctionnement de base</a></li>
  <li><a href="#travail-collaboratif" id="toc-travail-collaboratif" class="nav-link" data-scroll-target="#travail-collaboratif"><span class="header-section-number">7.4</span> Travail collaboratif</a></li>
  <li><a href="#fonctionnalités-utiles" id="toc-fonctionnalités-utiles" class="nav-link" data-scroll-target="#fonctionnalités-utiles"><span class="header-section-number">7.5</span> Fonctionnalités utiles</a></li>
  <li><a href="#cas-dusage-professionnel-veille-sur-lemploi-la-formation" id="toc-cas-dusage-professionnel-veille-sur-lemploi-la-formation" class="nav-link" data-scroll-target="#cas-dusage-professionnel-veille-sur-lemploi-la-formation"><span class="header-section-number">7.6</span> Cas d’usage professionnel : veille sur l’emploi &amp; la formation</a></li>
  <li><a href="#méthodologie-recommandée" id="toc-méthodologie-recommandée" class="nav-link" data-scroll-target="#méthodologie-recommandée"><span class="header-section-number">7.7</span> Méthodologie recommandée</a></li>
  <li><a href="#vers-une-base-documentaire-dynamique" id="toc-vers-une-base-documentaire-dynamique" class="nav-link" data-scroll-target="#vers-une-base-documentaire-dynamique"><span class="header-section-number">7.8</span> Vers une base documentaire dynamique</a></li>
  <li><a href="#à-creuser-aller-plus-loin" id="toc-à-creuser-aller-plus-loin" class="nav-link" data-scroll-target="#à-creuser-aller-plus-loin"><span class="header-section-number">7.9</span> À creuser / Aller plus loin</a></li>
  </ul></li>
  <li><a href="#annexes-exemples-de-code-r" id="toc-annexes-exemples-de-code-r" class="nav-link" data-scroll-target="#annexes-exemples-de-code-r"><span class="header-section-number">8</span> Annexes : exemples de code R</a>
  <ul class="collapse">
  <li><a href="#lecture-et-extraction-de-sitemap-xml" id="toc-lecture-et-extraction-de-sitemap-xml" class="nav-link" data-scroll-target="#lecture-et-extraction-de-sitemap-xml"><span class="header-section-number">8.1</span> Lecture et extraction de sitemap XML</a></li>
  <li><a href="#quarto" id="toc-quarto" class="nav-link" data-scroll-target="#quarto"><span class="header-section-number">8.2</span> Quarto</a></li>
  <li><a href="#running-code" id="toc-running-code" class="nav-link" data-scroll-target="#running-code"><span class="header-section-number">8.3</span> Running Code</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Kantiles_formation.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Rapport complet : Recensements, Quarto, Scraping, PDF et Zotero</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Utilisateur </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 21, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Ce rapport rassemble les notes détaillées sur plusieurs thématiques clés dans le traitement des données, la gestion documentaire, et la production de rapports.<br>
Les sujets abordés sont :</p>
<ul>
<li>Recensements et gestion de grandes bases de données</li>
<li>Utilisation avancée de Quarto et Markdown</li>
<li>Techniques de scraping en R</li>
<li>Lecture et traitement de PDF en R</li>
<li>Organisation documentaire avec Zotero</li>
</ul>
<hr>
</section>
<section id="test" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> test</h1>
<section id="rapport-annuel" class="level2 panel-tabset" data-number="2.1">
<h2 class="panel-tabset anchored" data-number="2.1" data-anchor-id="rapport-annuel"><span class="header-section-number">2.1</span> Rapport annuel</h2>
<section id="introduction-1" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1" class="anchored" data-anchor-id="introduction-1"><span class="header-section-number">2.1.1</span> Introduction</h3>
<p>Ceci est l’introduction du rapport.</p>
</section>
<section id="données" class="level3 panel-collapse" data-number="2.1.2">
<h3 class="panel-collapse anchored" data-number="2.1.2" data-anchor-id="données"><span class="header-section-number">2.1.2</span> Données</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      mpg             cyl             disp             hp       
 Min.   :10.40   Min.   :4.000   Min.   : 71.1   Min.   : 52.0  
 1st Qu.:15.43   1st Qu.:4.000   1st Qu.:120.8   1st Qu.: 96.5  
 Median :19.20   Median :6.000   Median :196.3   Median :123.0  
 Mean   :20.09   Mean   :6.188   Mean   :230.7   Mean   :146.7  
 3rd Qu.:22.80   3rd Qu.:8.000   3rd Qu.:326.0   3rd Qu.:180.0  
 Max.   :33.90   Max.   :8.000   Max.   :472.0   Max.   :335.0  
      drat             wt             qsec             vs        
 Min.   :2.760   Min.   :1.513   Min.   :14.50   Min.   :0.0000  
 1st Qu.:3.080   1st Qu.:2.581   1st Qu.:16.89   1st Qu.:0.0000  
 Median :3.695   Median :3.325   Median :17.71   Median :0.0000  
 Mean   :3.597   Mean   :3.217   Mean   :17.85   Mean   :0.4375  
 3rd Qu.:3.920   3rd Qu.:3.610   3rd Qu.:18.90   3rd Qu.:1.0000  
 Max.   :4.930   Max.   :5.424   Max.   :22.90   Max.   :1.0000  
       am              gear            carb      
 Min.   :0.0000   Min.   :3.000   Min.   :1.000  
 1st Qu.:0.0000   1st Qu.:3.000   1st Qu.:2.000  
 Median :0.0000   Median :4.000   Median :2.000  
 Mean   :0.4062   Mean   :3.688   Mean   :2.812  
 3rd Qu.:1.0000   3rd Qu.:4.000   3rd Qu.:4.000  
 Max.   :1.0000   Max.   :5.000   Max.   :8.000  </code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="recensements" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Recensements</h1>
<section id="description-des-fichiers" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="description-des-fichiers"><span class="header-section-number">3.1</span> Description des fichiers</h2>
<ul>
<li>Deux fichiers principaux : <code>ointerrogationsprincipales</code> et un fichier complémentaire.</li>
<li>Non diffusés directement au public, servent à produire plusieurs fichiers diffusés.</li>
<li>Données au niveau des cantons, villes, avec parfois localisation précise (unité Iris).</li>
<li>Utilisation pour mobilités professionnelles et scolaires.</li>
</ul>
</section>
<section id="formats-de-diffusion" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="formats-de-diffusion"><span class="header-section-number">3.2</span> Formats de diffusion</h2>
<ul>
<li>Fichiers diffusés en CSV et Parquet (format optimisé, indexé, rapide).</li>
<li>Parquet de plus en plus utilisé en statistique.</li>
<li>Données lourdes : environ 26 millions de lignes par fichier.</li>
<li>Une ligne coûte en ressources ~3 francs (évaluation de coût traitement).</li>
</ul>
</section>
<section id="outils-pour-manipuler" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="outils-pour-manipuler"><span class="header-section-number">3.3</span> Outils pour manipuler</h2>
<ul>
<li>Dugdibby : base de données sur serveur permettant lecture et tri.</li>
<li>Installation locale + serveur distant.</li>
<li>Base orientée colonnes, optimisée pour analyse.</li>
</ul>
</section>
<section id="import-et-manipulation-en-r" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="import-et-manipulation-en-r"><span class="header-section-number">3.4</span> Import et manipulation en R</h2>
<ul>
<li>Utilisation de fonctions <code>glue()</code> pour assembler chaînes de caractères, notamment pour importer.</li>
<li>Utilisation de <code>here::here()</code> pour gérer chemins absolus et relatifs, éviter erreurs liées aux chemins.</li>
<li>Exemple d’import rapide :</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>data_path <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"recensement.parquet"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="quarto-et-markdown" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Quarto et Markdown</h1>
<section id="vue-générale" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="vue-générale"><span class="header-section-number">4.1</span> Vue générale</h2>
<ul>
<li>Quarto repose sur <strong>Pandoc</strong> : convertisseur universel Markdown vers plusieurs formats (HTML, PDF, Word, etc.).</li>
<li>Écrit en Rust, moderne et rapide.</li>
<li>Supporte plusieurs langages dans les chunks : R, Python, Observable JS, etc.</li>
</ul>
</section>
<section id="workflow" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="workflow"><span class="header-section-number">4.2</span> Workflow</h2>
<ul>
<li>Quarto exécute les chunks de code, produit un AST (Abstract Syntax Tree).</li>
<li>Pandoc convertit cet AST en documents finaux (HTML, PDF, etc.).</li>
</ul>
</section>
<section id="comparaison-avec-r-markdown" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="comparaison-avec-r-markdown"><span class="header-section-number">4.3</span> Comparaison avec R Markdown</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 35%">
<col style="width: 37%">
</colgroup>
<thead>
<tr class="header">
<th>Fonctionnalité</th>
<th>R Markdown</th>
<th>Quarto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Langage</td>
<td>R + Markdown</td>
<td>Rust + Markdown</td>
</tr>
<tr class="even">
<td>Support chunks</td>
<td>R uniquement</td>
<td>R, Python, JS, autres</td>
</tr>
<tr class="odd">
<td>Paramétrage YAML</td>
<td>Basique</td>
<td>Avancé</td>
</tr>
<tr class="even">
<td>Sorties</td>
<td>HTML, PDF, Word</td>
<td>HTML, PDF, Word, et plus</td>
</tr>
</tbody>
</table>
</section>
<section id="création-pdf" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="création-pdf"><span class="header-section-number">4.4</span> Création PDF</h2>
<ul>
<li>Plusieurs méthodes :
<ul>
<li>LaTeX classique (fiable, mais lourd parfois)</li>
<li>Typst (nouveau langage, plus rapide)</li>
<li>PageJS (génération PDF via Chrome)</li>
<li>Impression design via HTML/Figma</li>
</ul></li>
</ul>
</section>
<section id="exemple-de-chunk-r" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="exemple-de-chunk-r"><span class="header-section-number">4.5</span> Exemple de chunk R</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library(readxl)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#tables &lt;- read_excel("tables_exported.xlsx")</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#head(tables)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
</section>
<section id="scraping-web-avec-r" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Scraping Web avec R</h1>
<section id="introduction-2" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="introduction-2"><span class="header-section-number">5.1</span> Introduction</h2>
<p>Le <strong>scraping web</strong> consiste à extraire automatiquement des données publiées sur des sites internet. Cette méthode est particulièrement utile lorsque les données ne sont pas disponibles via une API officielle ou sous un format exploitable directement (CSV, JSON, XML, etc.). Elle permet de collecter un large éventail d’informations : fiches produits, listes, tableaux, statistiques, organigrammes, documents, etc.</p>
<p>Cependant, le scraping nécessite une bonne maîtrise des technologies web (HTML, CSS, JavaScript) ainsi qu’une attention aux aspects légaux et éthiques (respect du fichier robots.txt, limitations du site, charge serveur).</p>
<hr>
</section>
<section id="pourquoi-faire-du-scraping" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="pourquoi-faire-du-scraping"><span class="header-section-number">5.2</span> Pourquoi faire du scraping ?</h2>
<ul>
<li><strong>Collecter des données non accessibles autrement</strong>, notamment sur des sites qui ne proposent pas d’API ou de fichiers exportables.<br>
</li>
<li><strong>Automatiser la veille documentaire</strong> en récupérant régulièrement les nouvelles publications d’un site.<br>
</li>
<li><strong>Récupérer des informations structurées dans des pages HTML complexes</strong>, par exemple des tableaux ou des fiches détaillées.<br>
</li>
<li><strong>Enrichir des jeux de données locaux</strong> avec des données publiques sectorielles, comme des organigrammes ou listes d’acteurs.</li>
</ul>
<hr>
</section>
<section id="outils-et-bibliothèques-en-r" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="outils-et-bibliothèques-en-r"><span class="header-section-number">5.3</span> Outils et bibliothèques en R</h2>
<ul>
<li><strong><code>rvest</code></strong> : bibliothèque principale pour lire, parser et extraire du contenu HTML. Utilise les sélecteurs CSS ou XPath pour cibler précisément les éléments à extraire.<br>
</li>
<li><strong><code>xml2</code></strong> : permet de lire et manipuler des documents XML (utile pour lire des sitemaps par exemple).<br>
</li>
<li><strong><code>httr</code> ou <code>curl</code></strong> : pour gérer les requêtes HTTP, parfois nécessaires pour simuler des sessions, gérer des cookies, ou contourner des protections.<br>
</li>
<li><strong><code>purrr</code></strong> : fonctionnel pour itérer sur des listes d’URLs et appliquer des fonctions de scraping.<br>
</li>
<li><strong>Extensions Chrome (Selector Gadget, DevTools)</strong> : outils indispensables pour identifier rapidement les sélecteurs CSS et tester les expressions XPath.</li>
</ul>
<hr>
</section>
<section id="bonnes-pratiques-avant-de-commencer" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="bonnes-pratiques-avant-de-commencer"><span class="header-section-number">5.4</span> Bonnes pratiques avant de commencer</h2>
<ul>
<li><strong>Vérifier le fichier <code>robots.txt</code></strong> du site (ex. https://www.site.com/robots.txt) qui liste les parties autorisées ou interdites au scraping. Respecter ces consignes est crucial pour éviter tout litige légal.<br>
</li>
<li><strong>Analyser la structure du site</strong> : repérer les pages d’index, les pages détaillées, les liens à suivre, et identifier les sélecteurs CSS/XPath précis.<br>
</li>
<li><strong>Consulter le sitemap XML</strong> si disponible, car il facilite la récupération automatique des URLs à scraper.<br>
</li>
<li><strong>Limiter la fréquence des requêtes</strong> pour ne pas surcharger le serveur (exemple : pause entre requêtes avec <code>Sys.sleep()</code>).<br>
</li>
<li><strong>Tester et valider chaque étape manuellement</strong> avant d’automatiser à grande échelle.<br>
</li>
<li><strong>Documenter le script</strong> pour faciliter la maintenance et la mise à jour si la structure du site change.</li>
</ul>
<hr>
</section>
<section id="exemple-complet-récupération-et-scraping-de-fiches-sur-cheese.com" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="exemple-complet-récupération-et-scraping-de-fiches-sur-cheese.com"><span class="header-section-number">5.5</span> Exemple complet : récupération et scraping de fiches sur cheese.com</h2>
<section id="étape-1-récupération-des-urls-via-sitemap" class="level3" data-number="5.5.1">
<h3 data-number="5.5.1" class="anchored" data-anchor-id="étape-1-récupération-des-urls-via-sitemap"><span class="header-section-number">5.5.1</span> Étape 1 : récupération des URLs via sitemap</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xml2)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>url_sitemap <span class="ot">&lt;-</span> <span class="st">"https://www.cheese.com/sitemap.xml"</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>sitemap <span class="ot">&lt;-</span> <span class="fu">read_xml</span>(url_sitemap)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraction des URLs du sitemap</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>urls <span class="ot">&lt;-</span> <span class="fu">xml_find_all</span>(sitemap, <span class="st">"//url/loc"</span>) <span class="sc">%&gt;%</span> <span class="fu">xml_text</span>()</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(urls, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attachement du package : 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Les objets suivants sont masqués depuis 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Les objets suivants sont masqués depuis 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>url_annuaire <span class="ot">&lt;-</span> <span class="st">"https://www.cheese.com/all-cheeses/"</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url_annuaire)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraction des liens vers chaque fiche</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>liens_fromages <span class="ot">&lt;-</span> page <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">".cheeseList a"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">"href"</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Nettoyage des liens pour avoir URL absolue</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>liens_fromages <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"https://www.cheese.com"</span>, liens_fromages)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(liens_fromages, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "https://www.cheese.com"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>url_annuaire <span class="ot">&lt;-</span> <span class="st">"https://www.cheese.com/all-cheeses/"</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url_annuaire)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraction des liens vers chaque fiche</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>liens_fromages <span class="ot">&lt;-</span> page <span class="sc">%&gt;%</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">".cheeseList a"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">"href"</span>)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Nettoyage des liens pour avoir URL absolue</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>liens_fromages <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"https://www.cheese.com"</span>, liens_fromages)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(liens_fromages, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "https://www.cheese.com"</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="lecture-de-pdf-en-r" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Lecture de PDF en R</h1>
<section id="outils" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="outils"><span class="header-section-number">6.1</span> Outils</h2>
<ul>
<li><strong>tesseract</strong> : outil OCR pour extraire du texte à partir d’images contenues dans des PDF.</li>
<li><strong>tabulizer</strong> (package R) : extraction de tableaux depuis des PDF, particulièrement efficace pour les tableaux “screenshot” (captures d’écran intégrées dans PDF).</li>
<li><strong>pdftools</strong> : manipulation basique et extraction de texte dans les PDF.</li>
</ul>
</section>
<section id="usages" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="usages"><span class="header-section-number">6.2</span> Usages</h2>
<ul>
<li>Extraction de tableaux complexes, notamment lorsque les données sont intégrées en image (screenshot).</li>
<li>Le package <code>tabulizer</code> est utile pour extraire ces tableaux, contrairement à l’OCR qui fonctionne moins bien sur ce type de données.</li>
<li>Vérifier la cohérence des tailles de listes extraites (ex. colonnes de tableaux) pour éviter les erreurs de décalage ou pertes de données.</li>
<li>Gérer les valeurs manquantes, car en HTML/texte brut, il n’y a pas de NA natif.</li>
<li>Utile pour enrichir des données sectorielles ou locales à partir de rapports PDF.</li>
</ul>
</section>
<section id="cas-pratique" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="cas-pratique"><span class="header-section-number">6.3</span> Cas pratique</h2>
<ul>
<li>Tester sur des sites institutionnels comme l’INSEE en live.</li>
<li>Nettoyer et structurer les données extraites pour créer des jeux de données propres.</li>
<li>Être vigilant aux problèmes liés à la mise en forme des PDF (listes, colonnes, espacements).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library(pdftools)</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemple d'extraction texte d'un PDF local</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># texte_pdf &lt;- pdf_text("exemple_rapport.pdf")</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Affichage des 500 premiers caractères de la première page</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># cat(substr(texte_pdf[1], 1, 500))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library(tabulizer)</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraction des tableaux d'un PDF</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># tables &lt;- extract_tables("exemple_rapport.pdf")</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Affichage du premier tableau extrait</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># print(tables[[1]])</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library(tesseract)</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraction de texte depuis une image (capture ou PDF image)</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># texte_ocr &lt;- ocr("exemple_image_page.png")</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># cat(texte_ocr)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
</section>
<section id="zotero-gestion-documentaire" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Zotero : gestion documentaire</h1>
<section id="module-zotero-veille-documentaire" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="module-zotero-veille-documentaire"><span class="header-section-number">7.1</span> Module : Zotero &amp; Veille documentaire</h2>
<ul>
<li>Juin 2025</li>
<li>Emmanuel Herbepin et Victoire Chatain</li>
</ul>
<hr>
</section>
<section id="présentation-générale-de-zotero" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="présentation-générale-de-zotero"><span class="header-section-number">7.2</span> Présentation générale de Zotero</h2>
<ul>
<li>Zotero est un outil de gestion bibliographique gratuit, open source, et très adapté pour :
<ul>
<li>La veille documentaire structurée.<br>
</li>
<li>La gestion collaborative de références (études, articles, rapports, etc.).<br>
</li>
<li>La constitution d’une base de connaissance dynamique.</li>
</ul></li>
</ul>
<hr>
</section>
<section id="fonctionnement-de-base" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="fonctionnement-de-base"><span class="header-section-number">7.3</span> Fonctionnement de base</h2>
<ul>
<li>Organisation par dossiers et sous-dossiers.<br>
</li>
<li>Ajout de documents :
<ul>
<li>Depuis un plugin navigateur (fonctionne très bien avec Cairn, par exemple).<br>
</li>
<li>Manuellement (ajout de PDF, capture de page, etc.).<br>
</li>
</ul></li>
<li>Chaque document peut contenir :
<ul>
<li>Des métadonnées (titre, auteur, date…).<br>
</li>
<li>Des pièces jointes (PDF, notes, etc.).<br>
</li>
<li>Des commentaires et surlignages collaboratifs.</li>
</ul></li>
</ul>
<hr>
</section>
<section id="travail-collaboratif" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="travail-collaboratif"><span class="header-section-number">7.4</span> Travail collaboratif</h2>
<ul>
<li>Bibliothèque de groupe (via Zotero Web) :
<ul>
<li>Paramétrage des droits par membre.<br>
</li>
<li>Synchronisation automatique.<br>
</li>
<li>Partage des annotations visibles par tous (identification de l’auteur, surlignages, commentaires).<br>
</li>
</ul></li>
<li>Utilisable comme un Drive académique orienté contenu structuré.</li>
</ul>
<hr>
</section>
<section id="fonctionnalités-utiles" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="fonctionnalités-utiles"><span class="header-section-number">7.5</span> Fonctionnalités utiles</h2>
<ul>
<li>Tags / marqueurs pour organiser les contenus.<br>
</li>
<li>Génération automatique de bibliographies (choix du format).<br>
</li>
<li>Format de citation personnalisable (utile pour livrables, publications, rapports).<br>
</li>
<li>Format BibTeX disponible → interopérable avec R, Python, LaTeX.</li>
</ul>
<hr>
</section>
<section id="cas-dusage-professionnel-veille-sur-lemploi-la-formation" class="level2" data-number="7.6">
<h2 data-number="7.6" class="anchored" data-anchor-id="cas-dusage-professionnel-veille-sur-lemploi-la-formation"><span class="header-section-number">7.6</span> Cas d’usage professionnel : veille sur l’emploi &amp; la formation</h2>
<ul>
<li>Objectif :<br>
Construire une base documentaire cohérente, exhaustive, structurée, réutilisable et dynamique sur les thématiques métier.<br>
</li>
<li>Exemples :
<ul>
<li>Études sur les compétences dans les métiers de la santé.<br>
</li>
<li>Publications régionales et nationales : DREES, DARES, INSEE, France Travail, etc.<br>
</li>
<li>Mémoires, études locales, travaux des observatoires OPCO, InterCarifOref, France Compétences…<br>
</li>
</ul></li>
<li>Organisation :
<ul>
<li>Hiérarchisation des sources.<br>
</li>
<li>Sélection raisonnée des institutions clés.<br>
</li>
<li>Veille structurée sur 15 000 à 20 000 études (sur 20 ans) de 4 à 8 pages chacune.</li>
</ul></li>
</ul>
<hr>
</section>
<section id="méthodologie-recommandée" class="level2" data-number="7.7">
<h2 data-number="7.7" class="anchored" data-anchor-id="méthodologie-recommandée"><span class="header-section-number">7.7</span> Méthodologie recommandée</h2>
<ul>
<li>Étape 1 : Constitution du corpus
<ul>
<li>Liste prioritaire : DREES, DARES, INSEE, France Travail, Trésor, OPCO.<br>
</li>
<li>Acteurs régionaux : InterCarifOref, collectivités territoriales.<br>
</li>
<li>Indexation manuelle + flux RSS + scraping raisonné.<br>
</li>
</ul></li>
<li>Étape 2 : Intégration dans Zotero
<ul>
<li>Par scraping ou via export BibTeX → import dans Zotero.<br>
</li>
<li>Utilisation des API Zotero et/ou packages dédiés pour automatiser.<br>
</li>
</ul></li>
<li>Étape 3 : Structuration documentaire
<ul>
<li>Tags thématiques.<br>
</li>
<li>Catégorisation par année, région, institution.<br>
</li>
<li>Export possible vers livrable interne ou outil de visualisation (type Quarto ou R Markdown).</li>
</ul></li>
</ul>
<hr>
</section>
<section id="vers-une-base-documentaire-dynamique" class="level2" data-number="7.8">
<h2 data-number="7.8" class="anchored" data-anchor-id="vers-une-base-documentaire-dynamique"><span class="header-section-number">7.8</span> Vers une base documentaire dynamique</h2>
<ul>
<li>Objectif : passer du statique au dynamique.<br>
</li>
<li>Intégrer les études dans une base réinterrogeable (dashboard, moteur de recherche, analyse de tendance…).<br>
</li>
<li>Base centrale pour fonction observatoire interne.<br>
</li>
<li>Exemples d’usages :
<ul>
<li>Liste des études par année.<br>
</li>
<li>Focus régional ou sectoriel.<br>
</li>
<li>Suivi des politiques publiques ou signaux faibles.</li>
</ul></li>
</ul>
<hr>
</section>
<section id="à-creuser-aller-plus-loin" class="level2" data-number="7.9">
<h2 data-number="7.9" class="anchored" data-anchor-id="à-creuser-aller-plus-loin"><span class="header-section-number">7.9</span> À creuser / Aller plus loin</h2>
<ul>
<li>API Zotero pour automatiser des chargements et extractions.<br>
</li>
<li>Connecteurs avec Zotero depuis R (<code>rbbt</code>, <code>zoteroR</code>) ou Python.<br>
</li>
<li>Scraping bibliographique ciblé sur les bons sites.<br>
</li>
<li>Intégration avec un outil de visualisation dynamique (Quarto, Observable, Shiny…).</li>
</ul>
<hr>
</section>
</section>
<section id="annexes-exemples-de-code-r" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Annexes : exemples de code R</h1>
<section id="lecture-et-extraction-de-sitemap-xml" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="lecture-et-extraction-de-sitemap-xml"><span class="header-section-number">8.1</span> Lecture et extraction de sitemap XML</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xml2)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>url_sitemap <span class="ot">&lt;-</span> <span class="st">"https://www.cheese.com/sitemap.xml"</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>sitemap <span class="ot">&lt;-</span> <span class="fu">read_xml</span>(url_sitemap)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>urls <span class="ot">&lt;-</span> <span class="fu">xml_find_all</span>(sitemap, <span class="st">"//url/loc"</span>) <span class="sc">%&gt;%</span> <span class="fu">xml_text</span>()</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(urls)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
</div>
</section>
<section id="quarto" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="quarto"><span class="header-section-number">8.2</span> Quarto</h2>
<p>Quarto enables you to weave together content and executable code into a finished document. To learn more about Quarto see <a href="https://quarto.org" class="uri">https://quarto.org</a>.</p>
</section>
<section id="running-code" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="running-code"><span class="header-section-number">8.3</span> Running Code</h2>
<p>When you click the <strong>Render</strong> button a document will be generated that includes both content and the output of embedded code. You can embed code like this:</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>